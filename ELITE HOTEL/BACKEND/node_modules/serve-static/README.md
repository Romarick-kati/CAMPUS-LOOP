# serve-static[![NPM Version][npm-version-image]][npm-url][![NPM Downloads][npm-downloads-image]][npm-url][![Linux Build][github-actions-ci-image]][github-actions-ci-url][![Windows Build][appveyor-image]][appveyor-url][![Test Coverage][coveralls-image]][coveralls-url]## InstallThis is a [Node.js](https://nodejs.org/en/) module available through the[npm registry](https://www.npmjs.com/). Installation is done using the[`npm install` command](https://docs.npmjs.com/getting-started/installing-npm-packages-locally):```sh$ npm install serve-static```## API```jsvar serveStatic = require('serve-static')```### serveStatic(root, options)Create a new middleware function to serve files from within a given rootdirectory. The file to serve will be determined by combining `req.url`with the provided root directory. When a file is not found, instead ofsending a 404 response, this module will instead call `next()` to move onto the next middleware, allowing for stacking and fall-backs.#### Options##### acceptRangesEnable or disable accepting ranged requests, defaults to true.Disabling this will not send `Accept-Ranges` and ignore the contentsof the `Range` request header.##### cacheControlEnable or disable setting `Cache-Control` response header, defaults totrue. Disabling this will ignore the `immutable` and `maxAge` options.##### dotfiles Set how "dotfiles" are treated when encountered. A dotfile is a fileor directory that begins with a dot ("."). Note this check is done onthe path itself without checking if the path actually exists on thedisk. If `root` is specified, only the dotfiles above the root arechecked (i.e. the root itself can be within a dotfile when setto "deny").  - `'allow'` No special treatment for dotfiles.  - `'deny'` Deny a request for a dotfile and 403/`next()`.  - `'ignore'` Pretend like the dotfile does not exist and 404/`next()`.The default value is similar to `'ignore'`, with the exception that thisdefault will not ignore the files within a directory that begins with a dot.##### etagEnable or disable etag generation, defaults to true.##### extensionsSet file extension fallbacks. When set, if a file is not found, the givenextensions will be added to the file name and search for. The first thatexists will be served. Example: `['html', 'htm']`.The default value is `false`.##### fallthroughSet the middleware to have client errors fall-through as just unhandledrequests, otherwise forward a client error. The difference is that clienterrors like a bad request or a request to a non-existent file will causethis middleware to simply `next()` to your next middleware when this valueis `true`. When this value is `false`, these errors (even 404s), will invoke`next(err)`.Typically `true` is desired such that multiple physical directories can bemapped to the same web address or for routes to fill in non-existent files.The value `false` can be used if this middleware is mounted at a path thatis designed to be strictly a single file system directory, which allows forshort-circuiting 404s for less overhead. This middleware will also reply toall methods.The default value is `true`.##### immutableEnable or disable the `immutable` directive in the `Cache-Control` responseheader, defaults to `false`. If set to `true`, the `maxAge` option shouldalso be specified to enable caching. The `immutable` directive will preventsupported clients from making conditional requests during the life of the`maxAge` option to check if the file has changed.##### indexBy default this module will send "index.html" files in response to a requeston a directory. To disable this set `false` or to supply a new index pass astring or an array in preferred order.##### lastModifiedEnable or disable `Last-Modified` header, defaults to true. Uses the filesystem's last modified value.##### maxAgeProvide a max-age in milliseconds for http caching, defaults to 0. Thiscan also be a string accepted by the [ms](https://www.npmjs.org/package/ms#readme)module.##### redirectRedirect to trailing "/" when the pathname is a dir. Defaults to `true`.##### setHeadersFunction to set custom headers on response. Alterations to the headers need tooccur synchronously. The function is called as `fn(res, path, stat)`, wherethe arguments are:  - `res` the response object  - `path` the file path that is being sent  - `stat` the stat object of the file that is being sent## Examples### Serve files with vanilla node.js http server```jsvar finalhandler = require('finalhandler')var http = require('http')var serveStatic = require('serve-static')// Serve up public/ftp foldervar serve = serveStatic('public/ftp', { index: ['index.html', 'index.htm'] })// Create servervar server = http.createServer(function onRequest (req, res) {  serve(req, res, finalhandler(req, res))})// Listenserver.listen(3000)```### Serve all files as downloads```jsvar contentDisposition = require('content-disposition')var finalhandler = require('finalhandler')var http = require('http')var serveStatic = require('serve-static')// Serve up public/ftp foldervar serve = serveStatic('public/ftp', {  index: false,  setHeaders: setHeaders})// Set header to force downloadfunction setHeaders (res, path) {  res.setHeader('Content-Disposition', contentDisposition(path))}// Create servervar server = http.createServer(function onRequest (req, res) {  serve(req, res, finalhandler(req, res))})// Listenserver.listen(3000)```### Serving using express#### SimpleThis is a simple example of using Express.```jsvar express = require('express')var serveStatic = require('serve-static')var app = express()app.use(serveStatic('public/ftp', { index: ['default.html', 'default.htm'] }))app.listen(3000)```#### Multiple rootsThis example shows a simple way to search through multiple directories.Files are searched for in `public-optimized/` first, then `public/` secondas a fallback.```jsvar express = require('express')var path = require('path')var serveStatic = require('serve-static')var app = express()app.use(serveStatic(path.join(__dirname, 'public-optimized')))app.use(serveStatic(path.join(__dirname, 'public')))app.listen(3000)```#### Different settings for pathsThis example shows how to set a different max age depending on the servedfile type. In this example, HTML files are not cached, while everything elseis for 1 day.```jsvar express = require('express')var path = require('path')var serveStatic = require('serve-static')var app = express()app.use(serveStatic(path.join(__dirname, 'public'), {  maxAge: '1d',  setHeaders: setCustomCacheControl}))app.listen(3000)function setCustomCacheControl (res, path) {  if (serveStatic.mime.lookup(path) === 'text/html') {    // Custom Cache-Control for HTML files    res.setHeader('Cache-Control', 'public, max-age=0')  }}```## License[MIT](LICENSE)[appveyor-image]: https://badgen.net/appveyor/ci/dougwilson/serve-static/master?label=windows[appveyor-url]: https://ci.appveyor.com/project/dougwilson/serve-static[coveralls-image]: https://badgen.net/coveralls/c/github/expressjs/serve-static/master[coveralls-url]: https://coveralls.io/r/expressjs/serve-static?branch=master[github-actions-ci-image]: https://badgen.net/github/checks/expressjs/serve-static/master?label=linux[github-actions-ci-url]: https://github.com/expressjs/serve-static/actions/workflows/ci.yml[node-image]: https://badgen.net/npm/node/serve-static[node-url]: https://nodejs.org/en/download/[npm-downloads-image]: https://badgen.net/npm/dm/serve-static[npm-url]: https://npmjs.org/package/serve-static[npm-version-image]: https://badgen.net/npm/v/serve-static